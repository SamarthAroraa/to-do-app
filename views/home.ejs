<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    
    <!-- flavicon link -->
    <link
      rel="icon"
      href="/images/baseline_list_white_18dp.png"
      type="image/gif"
      sizes="16x16"
    />
    <!-- Bootstrap CDN link -->
    <link
      rel="stylesheet"
      href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
      integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm"
      crossorigin="anonymous"
    />
    <!-- google font CDN link -->
    <link
      href="https://fonts.googleapis.com/css2?family=Josefin+Sans:wght@300;400&display=swap"
      rel="stylesheet"
    />
    <!-- material icons CDN -->
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/icon?family=Material+Icons"
    />

    <link rel="stylesheet" href="/css/styles.css" />
    <title>
      TO-DO
    </title>
  </head>
  <body>
    <div class="container">


      <!-- This is the main interface body  -->
      <div class="interface">
        <!-- Primary App Heading -->
        <div class="jumbotron justify-content-center">
          <h1>
            <i class="material-icons" id="list-logo">
              format_list_bulleted
            </i>
            THE TO-DO APP
          </h1>
          <p class="lead">'Declutter' your life.</p>
        </div>



        <!-- Task Creation Form -->
        <form action="/create" method="post">


          <!-- Description  Form input field-->
          <div class="input-group mb-3" id="desc-bar">
            <div class="input-group-prepend">
              <span class="input-group-text" id="description">Description</span>
            </div>
            <input
              type="text"
              class="form-control"
              name="description"
              aria-describedby="description"
              placeholder="What would you like to do today?"
              required
            />
          </div>

          <!-- Task Category Input Field -->
          <div class="form-row">
            <div class="col">
              <div class="input-group mb-3" id="categ-bar">
                <div class="input-group-prepend">
                  <label class="input-group-text" for="inputGroupSelect01">
                    Category &nbsp;</label
                  >
                </div>
                <select
                  name="category"
                  class="custom-select"
                  id="inputGroupSelect01"
                >
                  <option selected value="null">Choose task category</option>
                  <option value="personal">Personal</option>
                  <option value="work">Work</option>
                  <option value="school">School</option>
                  <option value="cleaning">Cleaning</option>
                  <option value="other">Other</option>
                </select>
              </div>
            </div>


            <!-- Due Date calender input field-->
            <div class="col">
              <input
                type="date"
                class="form-control"
                id="date-bar"
                name="due"
              />
            </div>    
          </div>


        <!-- Add Task Button -->
          <button type="submit" class="btn btn-primary main">
            <!-- add icon -->
            <i class="material-icons plus">
              add 
            </i>
              ADD TASK
          </button>

          <!-- Clear Task list button -->
          <a href="/delete-all">
            <button class="btn btn-danger main" >
          <!-- delete icon -->
          <i class='material-icons trash'>&#xe872</i> CLEAR TASKS
            </button>
            </a>
        </form>

      <!-- Task list container  -->
        <div class="tasks">
          <% for(let t of task_list) { %>

          <div class="card">
            <div class="card-body">
              
              <!-- Checkbox for completed tasks -->
              <div class="done">
                <input type="checkbox" aria-label="Checkbox for task" value="<%= t.id %>" class="check"/>
              </div>
              
              <!-- Task Description -->
              <div class="card-desc" id="<%= t.id %>">
                <%= t.description %>
                <div class="due">
                  <i class="material-icons calender">
                    date_range
                  </i>

                  <!-- Here, I've converted the date stored in the database to -->
                  <!-- the required dd/mm/yyyy format using getDate(),getMonth() & getFullYear() -->
                  <!-- methods --> 
                  <% let f_date;if(t.due!=null){let d=t.due.getDate(); let m=t.due.getMonth()+1; let y=t.due.getFullYear();  f_date=d+'/'+m+'/'+y} else f_date = "No Due Date"%>
                  <%=  f_date %>
                </div>
              </div>

              <!-- Task Category display card -->
              <div class="category-card">
                <button type="button" class="btn btn-lg btn-primary category" id="<%= t.category %>" disabled>
                  <%= t.category %>
                </button>
              </div>

              
            </div>
          </div>
          <% } %>
        </div>



      </div>
    </div>
    <script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
    <!-- <script
      src="https://code.jquery.com/jquery-3.2.1.slim.min.js"
      integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"
      integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"
      integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl"
      crossorigin="anonymous"
    ></script> -->
    <script src="/javascript/script.js"></script>
  </body>
</html>
